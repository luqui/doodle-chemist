<html>
<head>
<body>
<canvas id="canvas" style="border: 1px solid black" width="640" height="640"></canvas>
<div id="palette"></div>
</body>
<script>

(function() {
  var canvas = document.getElementById("canvas");
  cx = canvas.getContext('2d');

  canvas.addEventListener('click', function(e) {
    var x = e.clientX - canvas.offsetLeft;
    var y = e.clientY - canvas.offsetTop;

    x = Math.floor(x/10)*10;
    y = Math.floor(y/10)*10;

    cx.fillRect(x, y, 10, 10);
  });

  var palette = document.getElementById("palette");
  var paletteColors = [ 
    "#000000",
    "#0000ff",
    "#00ff00",
    "#00ffff",
    "#ff0000",
    "#ff00ff",
    "#ffff00",
    "#ffffff" ];

  for (var i = 0; i < paletteColors.length; i++) {
    (function() {
      var entry = document.createElement("span");
      var color = paletteColors[i];
      entry.setAttribute("style", 
        "display: inline-block; width: 50px; height: 50px; border: 1px solid black; background-color: " + color);
      entry.addEventListener("click", function(e) {
        cx.fillStyle = color;
      });
      document.body.appendChild(entry);
    })();
  }
})();
</script>
</html>
